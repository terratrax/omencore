<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:OmenCore.Avalonia.ViewModels"
             x:Class="OmenCore.Avalonia.Views.SettingsView"
             x:DataType="vm:SettingsViewModel">
    
    <ScrollViewer>
        <StackPanel Spacing="16">
            
            <!-- Page Header -->
            <TextBlock Classes="pageHeader" Text="Settings" />
            <TextBlock Classes="label" Text="Application configuration and preferences" Margin="0,-4,0,12" />
            
            <!-- Startup Settings -->
            <Border Classes="card">
                <StackPanel>
                    <TextBlock Classes="sectionHeader" Text="Startup" />
                    
                    <StackPanel Spacing="12" Margin="0,12,0,0">
                        <ToggleSwitch IsChecked="{Binding StartWithSystem}"
                                      OnContent="Start with system"
                                      OffContent="Don't start with system" />
                        
                        <ToggleSwitch IsChecked="{Binding StartMinimized}"
                                      OnContent="Start minimized"
                                      OffContent="Start in normal window" />
                        
                        <ToggleSwitch IsChecked="{Binding AutoApplyProfile}"
                                      OnContent="Auto-apply last profile on startup"
                                      OffContent="Don't auto-apply profile" />
                    </StackPanel>
                </StackPanel>
            </Border>
            
            <!-- Default Settings -->
            <Border Classes="card">
                <StackPanel>
                    <TextBlock Classes="sectionHeader" Text="Defaults" />
                    
                    <Grid ColumnDefinitions="*,*" Margin="0,12,0,0" RowDefinitions="Auto,Auto">
                        <StackPanel Grid.Column="0" Grid.Row="0" Margin="0,0,8,0">
                            <TextBlock Classes="label" Text="Default Performance Mode" />
                            <ComboBox ItemsSource="{Binding PerformanceModes}" 
                                      SelectedItem="{Binding DefaultPerformanceMode}"
                                      MinWidth="150" Margin="0,4,0,0" />
                        </StackPanel>
                        
                        <StackPanel Grid.Column="1" Grid.Row="0" Margin="8,0,0,0">
                            <TextBlock Classes="label" Text="Polling Interval (ms)" />
                            <ComboBox ItemsSource="{Binding PollingIntervals}" 
                                      SelectedItem="{Binding PollingInterval}"
                                      MinWidth="150" Margin="0,4,0,0" />
                        </StackPanel>
                    </Grid>
                </StackPanel>
            </Border>
            
            <!-- Power Management -->
            <Border Classes="card">
                <StackPanel>
                    <TextBlock Classes="sectionHeader" Text="Power Management" />
                    
                    <StackPanel Spacing="12" Margin="0,12,0,0">
                        <ToggleSwitch IsChecked="{Binding BatteryAwareFans}"
                                      OnContent="Auto-quiet fans when on battery"
                                      OffContent="Same fan profile on battery" />
                        
                        <StackPanel Orientation="Horizontal" Spacing="12">
                            <TextBlock Classes="label" Text="Battery fan reduction:" VerticalAlignment="Center" />
                            <ComboBox ItemsSource="{Binding BatteryReductionOptions}" 
                                      SelectedItem="{Binding BatterySpeedReduction}"
                                      MinWidth="100" />
                            <TextBlock Classes="label" Text="%" VerticalAlignment="Center" />
                        </StackPanel>
                    </StackPanel>
                </StackPanel>
            </Border>
            
            <!-- Appearance -->
            <Border Classes="card">
                <StackPanel>
                    <TextBlock Classes="sectionHeader" Text="Appearance" />
                    
                    <ToggleSwitch IsChecked="{Binding DarkTheme}"
                                  OnContent="Dark theme"
                                  OffContent="Light theme"
                                  Margin="0,12,0,0" />
                </StackPanel>
            </Border>
            
            <!-- Notifications -->
            <Border Classes="card">
                <StackPanel>
                    <TextBlock Classes="sectionHeader" Text="Notifications" />
                    
                    <ToggleSwitch IsChecked="{Binding ShowNotifications}"
                                  OnContent="Show desktop notifications"
                                  OffContent="Don't show notifications"
                                  Margin="0,12,0,0" />
                </StackPanel>
            </Border>
            
            <!-- About -->
            <Border Classes="card">
                <StackPanel>
                    <TextBlock Classes="sectionHeader" Text="About" />
                    
                    <StackPanel Margin="0,12,0,0" Spacing="8">
                        <StackPanel Orientation="Horizontal" Spacing="8">
                            <TextBlock Text="Version:" Foreground="{StaticResource SecondaryTextBrush}" />
                            <TextBlock Text="{Binding Version}" FontWeight="SemiBold" />
                        </StackPanel>
                        
                        <StackPanel Orientation="Horizontal" Spacing="8" Margin="0,8,0,0">
                            <Button Classes="secondary" Content="Open Config Folder"
                                    Command="{Binding OpenConfigFolderCommand}" />
                            <Button Classes="secondary" Content="GitHub Repository"
                                    Command="{Binding OpenGitHubCommand}" />
                        </StackPanel>
                    </StackPanel>
                </StackPanel>
            </Border>
            
            <!-- Action Buttons -->
            <StackPanel Orientation="Horizontal" Spacing="12" HorizontalAlignment="Right" Margin="0,16,0,0">
                <Button Classes="secondary" Content="Reset to Defaults" 
                        Command="{Binding ResetToDefaultsCommand}" />
                <Button Classes="primary" Content="Save Settings" 
                        Command="{Binding SaveSettingsCommand}" />
            </StackPanel>
            
            <!-- Status Message -->
            <Border Background="#1A1A1A" CornerRadius="4" Padding="12,8" 
                    IsVisible="{Binding StatusMessage, Converter={x:Static StringConverters.IsNotNullOrEmpty}}">
                <TextBlock Text="{Binding StatusMessage}" 
                           Foreground="{StaticResource OmenBlueBrush}" />
            </Border>
            
        </StackPanel>
    </ScrollViewer>
</UserControl>
